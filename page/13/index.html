<!doctype html>
<html lang="zh-Hans">
<head>
  <title>PRIN BLOG - 半吊子全栈开发者的日常</title>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="HandheldFriendly" content="True" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
<meta name="generator" content="Hexo" />
<link rel="icon" href="/images/favicon.png" />
  <link rel="canonical" href="https://prinsss.github.io/page/13/"/>
  <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="PRIN BLOG">
  <meta name="keywords" content="prin, prinsss, printempw, blog, 博客, 独立博客" />

<meta name="description" content="这里是 prin 的个人博客，基本上啥都写：开发心得分享，日常吐槽吹水，偶尔也会写点正经文字。">
<meta property="og:type" content="website">
<meta property="og:title" content="PRIN BLOG">
<meta property="og:url" content="https://prinsss.github.io/page/13/index.html">
<meta property="og:site_name" content="PRIN BLOG">
<meta property="og:description" content="这里是 prin 的个人博客，基本上啥都写：开发心得分享，日常吐槽吹水，偶尔也会写点正经文字。">
<meta property="og:locale">
<meta property="article:author" content="prin">
<meta name="twitter:card" content="summary">
  <meta name="google-site-verification" content="GRFMvqszPSgldR5B46PfCl67MehNVagYoA9AtJpd8BA" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/han-css@3.3.0/dist/han.min.css">
<link rel="stylesheet" href="https://fonts.loli.net/css?family=Fira+Mono|Roboto+Slab:400,600|Noto+Serif+SC:600&display=swap">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@10.6.0/styles/atom-one-dark.min.css" media="screen and (prefers-color-scheme: dark)">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@10.6.0/styles/atom-one-light.min.css" media="screen and (prefers-color-scheme: light)">
<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/node-tikzjax@latest/css/fonts.css" /><style>.tikzjax { display: block; text-align: center; user-select: none; }</style></head>
<body>

<header>
  <div class="container">
    <div class="site-name">
      <a class="logo" href="/">PRIN BLOG</a>
      <span class="description">半吊子全栈开发者的日常</span>
    </div>
  </div>
</header>

<main>
  <div class="container">
    <div class="row">
      <section class="content col-md-8 col-12">
        
  
    <article class="post">
      <h2 class="post-title">
        <a href="/add-page-view-counter-for-ghost-blog/">为 Ghost 博客添加页面访问计数器</a>
      </h2>
      <div class="post-meta">
        <span class="post-meta-item post-meta-date">
  <time datetime="2016-01-31T23:37:00+08:00">2016-01-31</time>
</span>

<span class="post-meta-item post-meta-categories">
  <span class="post-meta-item-indicator">Category:</span>
  
    <a class="category-link" href="/categories/tech/">技术</a>
  
</span>

<span class="post-meta-item post-meta-tags">
  
    <a class="tag--link" href="/tag/Ghost/" rel="tag">Ghost</a> <a class="tag--link" href="/tag/%E5%8D%9A%E5%AE%A2/" rel="tag">博客</a>
  
</span>


<span class="post-meta-item post-meta-views">
  <span class="pv-counter">loading</span> views
</span>


      </div>
      <div class="post-content">
        
          <p>博客搬迁到 Ghost 后，原来的 Post Views 无法显示一直是窝的一大心病。</p>
<p>众所周知 Ghost 是使用模板语言 handlebars 来开发主题的，这也就造成了主题开发者们很难输出一些动态内容，而只能使用其内置的助手函数输出有限的可变内容。</p>
<p>总不能就这样下去吧，于是窝经过了一番搜索，找到了这个东西 —— <a target="_blank" rel="noopener" href="http://busuanzi.ibruce.info/">不算子</a>。</p>
<p>看来困扰于静态页面访问计数的不止窝一个啊。然而看了一下，不算子并不提供可调用的 API，也就是说窝没办法在文章分页上显示每篇文章的点击数了。</p>
<p>这怎么行？于是窝动了自己写计数服务的念头。</p>
          <p><a class="more-link" href="/add-page-view-counter-for-ghost-blog/#more">&gt; READ MORE...</a></p>
        
      </div>
    </article>
  
    <article class="post">
      <h2 class="post-title">
        <a href="/mail-log-to-conoha-user-center-after-ddos/">VPS 被 DDoS 后与 ConoHa 客服的邮件记录</a>
      </h2>
      <div class="post-meta">
        <span class="post-meta-item post-meta-date">
  <time datetime="2016-01-31T11:30:00+08:00">2016-01-31</time>
</span>

<span class="post-meta-item post-meta-categories">
  <span class="post-meta-item-indicator">Category:</span>
  
    <a class="category-link" href="/categories/diary/">日常</a>
  
</span>

<span class="post-meta-item post-meta-tags">
  
    <a class="tag--link" href="/tag/VPS/" rel="tag">VPS</a>
  
</span>


<span class="post-meta-item post-meta-views">
  <span class="pv-counter">loading</span> views
</span>


      </div>
      <div class="post-content">
        
          <p>挺醉的。翻译如下：</p>
<hr />
<blockquote>
<p>(お客様センター) - 2016/01/23 22:21</p>
</blockquote>
<blockquote>
<p>ご担当者 様</p>
</blockquote>
<blockquote>
<p>いつもご利用いただき、まことにありがとうございます。</p>
</blockquote>
<blockquote>
<p>ConoHa お客様センターです。</p>
</blockquote>
<blockquote>
<p>突然のご連絡失礼いたします。</p>
</blockquote>
<blockquote>
<p>このたびお客様にご利用いただいておりますVPSに対して、 外部からの不正なトラフィック（DDOS攻撃）を検知いたしました。</p>
</blockquote>
<blockquote>
<p>IPv4アドレス ：157.7.108.189</p>
</blockquote>
<blockquote>
<p>大変恐縮ではございますが、他のご利用者様への影響が懸念される 状況となっておりましたので、該当VPSに対する外部からの通信を すべてDropするようにさせていただきました。</p>
</blockquote>
<blockquote>
<p>サービスの安定運用上、何卒ご了承くださいますよう、お願い 申しあげます。</p>
</blockquote>
<blockquote>
<p>今後ともConoHaをよろしくお願いいたします。</p>
</blockquote>
<p>(客服中心) - 2016/01/23 22:21</p>
<p>尊敬的用户</p>
<p>非常感谢您一直以来的使用，这里是 ConoHa 客服中心。</p>
<p>突然的通知失礼了。</p>
<p>这次对于我们为您提供的 VPS，发现了外来的异常流量（DDOS攻击）。</p>
<p>IPv4 地址 ：157.7.108.189</p>
<p>虽然很过意不去，但是由于不知道是否会对其他使用者造成影响，所以我们将被攻击的 VPS 的外部通信全部 Drop 了。</p>
<p>为了对服务的稳定而进行的操作，敬请谅解。</p>
<p>今后也请多多关照 ConoHa。</p>
          <p><a class="more-link" href="/mail-log-to-conoha-user-center-after-ddos/#more">&gt; READ MORE...</a></p>
        
      </div>
    </article>
  
    <article class="post">
      <h2 class="post-title">
        <a href="/hello-ghost-goodbye-wordpress/">Hello Ghost, goodbye Wordpress</a>
      </h2>
      <div class="post-meta">
        <span class="post-meta-item post-meta-date">
  <time datetime="2016-01-31T02:21:10+08:00">2016-01-31</time>
</span>

<span class="post-meta-item post-meta-categories">
  <span class="post-meta-item-indicator">Category:</span>
  
    <a class="category-link" href="/categories/diary/">日常</a>
  
</span>

<span class="post-meta-item post-meta-tags">
  
    <a class="tag--link" href="/tag/Ghost/" rel="tag">Ghost</a> <a class="tag--link" href="/tag/WordPress/" rel="tag">WordPress</a> <a class="tag--link" href="/tag/%E5%8D%9A%E5%AE%A2/" rel="tag">博客</a>
  
</span>


<span class="post-meta-item post-meta-views">
  <span class="pv-counter">loading</span> views
</span>


      </div>
      <div class="post-content">
        
          <p>虽然以前就一直想要弃用 WordPress 了，但是由于没有时间<del>（懒）</del> ，而且也是对这个完善的 CMS 有了感情。</p>
<p>然而在 ConoHa 的 VPS 被 DDoS 而搬迁至 DigitalOcean 后，我奇怪的发现 WordPress 的响应速度慢了很多。TTFB 甚至达到了史无前例的 16s。</p>
<p>对于这种情况，我第一个想到的就是数据库的锅。然而看了慢查询日志，导出 wp query 却发现问题不在数据库查询上。</p>
<p>后来又使用了排除大法，最终将问题定位于我所使用的 Seventeen 主题上。</p>
<p>看来是主题中做了什么耗费大量 CPU 时间的事件，导致前后台响应慢成狗（默认主题没事）。</p>
<p>要知道同样内存，ConoHa 和 DigitalOcean 的 CPU 配置可不只差了一点半点。这也是我最初选择 ConoHa 的原因之一。</p>
<p>然而发生了这档子事，反正我是再也不会去用 ConoHa 了。</p>
<p>那么怎么办呢？活人总不能让尿憋死吧。</p>
          <p><a class="more-link" href="/hello-ghost-goodbye-wordpress/#more">&gt; READ MORE...</a></p>
        
      </div>
    </article>
  
    <article class="post">
      <h2 class="post-title">
        <a href="/ssh-over-proxy/">通过 Socks5 代理进行 SSH 连接</a>
      </h2>
      <div class="post-meta">
        <span class="post-meta-item post-meta-date">
  <time datetime="2016-01-25T00:23:20+08:00">2016-01-25</time>
</span>

<span class="post-meta-item post-meta-categories">
  <span class="post-meta-item-indicator">Category:</span>
  
    <a class="category-link" href="/categories/tech/">技术</a>
  
</span>

<span class="post-meta-item post-meta-tags">
  
    <a class="tag--link" href="/tag/GFW/" rel="tag">GFW</a>
  
</span>


<span class="post-meta-item post-meta-views">
  <span class="pv-counter">loading</span> views
</span>


      </div>
      <div class="post-content">
        
          <p>为什么要写这个呢？</p>
<p>这次 ConoHa 把我被 DDoS 的 VPS 所有对外连接 DROP 了。最开始是所有的连接都 DROP，只有控制台的 VNC 才连的上。连上以后只能 Ping 到内网。</p>
<p>所幸后来放宽了 DROP，日本的 IP 可以访问了。于是借用了同学的搭建于 ConoHa 的 Shadowsocks，准备把数据备份下来（ConoHa 删除被 D 主机不是一次两次了）。</p>
<p>那么要怎么样才能通过代理进行 SSH 连接呢？窝起先以为是像 curl 那样提供了参数，不曾想 man ssh 未果，只好 Google 解决方法。不过大部分都是搜到了 SSH 代理的教程，找了挺久的，为了让后来人少走弯路，遂记录一下。</p>
<p>下面介绍的是 connect 的使用方法，Corkscrew 可以看<a target="_blank" rel="noopener" href="http://www.techrepublic.com/blog/linux-and-open-source/using-corkscrew-to-tunnel-ssh-over-http/">这篇</a>。</p>
<h3 id="x01-下载并安装-connect"><a href="#x01-下载并安装-connect" class="headerlink" title="0x01 下载并安装 connect"></a>0x01 下载并安装 connect</h3>
<p>这是 connect 的 Bitbucket <a target="_blank" rel="noopener" href="https://bitbucket.org/gotoh/connect/src">项目地址</a>。</p>
<p>如果你是 Linux/Mac 用户，克隆项目到本地（然而窝不用 Mercurial），编译安装：</p>
<pre class="bash"><code>$ hg clone https://bitbucket.org/gotoh/connect
$ cd connect
$ make &amp;&amp; make install</code></pre>
<p>也可以：</p>
<pre class="bash"><code>$ gcc connect.c -o connect
$ cp connect /usr/local/bin</code></pre>
<p>如果你是 Windows 下的 Cygwin 用户，直接下载发行的<a target="_blank" rel="noopener" href="https://bitbucket.org/gotoh/connect/downloads">二进制文件</a>到 <code>C:/Windows</code> 中即可</p>
<h3 id="x02-配置-ssh"><a href="#x02-配置-ssh" class="headerlink" title="0x02 配置 SSH"></a>0x02 配置 SSH</h3>
<p>如果你使用的是 socks5 代理（Shadowsocks），添加这两行到 <code>~/.ssh/config</code></p>
<pre><code>Host *
    ProxyCommand connect -H 127.0.0.1:1080 %h %p</code></pre>
<p>如果你是使用 HTTP 代理，将 -H 改为 -S。</p>
<h3 id="x03-连接"><a href="#x03-连接" class="headerlink" title="0x03 连接"></a>0x03 连接</h3>
<p><img src="https://img.prin.studio/images/2016/01/2016-01-24_08-19-25.png" srcset="/images/loading.jpg" data-srcset="https://img.prin.studio/images/2016/01/2016-01-24_08-19-25.png" alt="success" /></p>
<p>成功</p>
<hr />
<p><del>装逼地使用了十六进制的标题序号</del></p>

        
      </div>
    </article>
  
    <article class="post">
      <h2 class="post-title">
        <a href="/fuck-you-conoha/">临时迁移至 DigitalOcean</a>
      </h2>
      <div class="post-meta">
        <span class="post-meta-item post-meta-date">
  <time datetime="2016-01-24T23:36:16+08:00">2016-01-24</time>
</span>

<span class="post-meta-item post-meta-categories">
  <span class="post-meta-item-indicator">Category:</span>
  
    <a class="category-link" href="/categories/diary/">日常</a>
  
</span>

<span class="post-meta-item post-meta-tags">
  
    <a class="tag--link" href="/tag/VPS/" rel="tag">VPS</a> <a class="tag--link" href="/tag/%E5%8D%9A%E5%AE%A2/" rel="tag">博客</a>
  
</span>


<span class="post-meta-item post-meta-views">
  <span class="pv-counter">loading</span> views
</span>


      </div>
      <div class="post-content">
        
          <p>由于 ConoHa 的 VPS 被 DDoS，被 DROP 了除日本 IP 外的所有连接，故紧急迁移至 DigitalOcean。同时导致了从昨晚 21 时到今天早上 10 点之间的服务不可用。</p>
<p>发了 Tickets，ConoHa 客服至今没有回应，看来星期天客服不上班是真的了<img src="https://img.prin.studio/images/2016/01/2016-01-24_07-30-08.jpg" srcset="/images/loading.jpg" data-srcset="https://img.prin.studio/images/2016/01/2016-01-24_07-30-08.jpg" alt="QQ图片20160124152956" /></p>
<p>遂临时迁移至 DigitalOcean。所有数据迁移后，发现 WordPress 的响应变得非常慢，TTFB 长时间大于 20s。经过排查，将问题锁定至主题。由于 DO 主频的问题，原先的 Seventeen 主题中不知道有什么占用了大量 CPU 时间的操作，导致响应时间延长。</p>
<p>遂换回 WordPress 默认主题 Twenty Fifteen。</p>
<p>不知道 ConoHa 的傻逼客服什么时候才会回复。</p>
<blockquote>
<p>– (お客様センター) – 2016/01/23 22:21 ご担当者 様</p>
<p>いつもご利用いただき、まことにありがとうございます。 ConoHa お客様センターです。</p>
<p>突然のご連絡失礼いたします。</p>
<p>このたびお客様にご利用いただいておりますVPSに対して、 外部からの不正なトラフィック（DDOS攻撃）を検知いたしました。</p>
<p>IPv4アドレス ：157.7.108.189</p>
<p>大変恐縮ではございますが、他のご利用者様への影響が懸念される 状況となっておりましたので、該当VPSに対する外部からの通信を すべてDropするようにさせていただきました。</p>
<p>サービスの安定運用上、何卒ご了承くださいますよう、お願い 申しあげます。</p>
<p>今後ともConoHaをよろしくお願いいたします。</p>
</blockquote>

        
      </div>
    </article>
  
    <article class="post">
      <h2 class="post-title">
        <a href="/do-you-like-me-mysqli-version/">使用 MySQLi 重写 Do you like me</a>
      </h2>
      <div class="post-meta">
        <span class="post-meta-item post-meta-date">
  <time datetime="2016-01-23T07:55:56+08:00">2016-01-23</time>
</span>

<span class="post-meta-item post-meta-categories">
  <span class="post-meta-item-indicator">Category:</span>
  
    <a class="category-link" href="/categories/tech/">技术</a>
  
</span>

<span class="post-meta-item post-meta-tags">
  
    <a class="tag--link" href="/tag/PHP/" rel="tag">PHP</a>
  
</span>


<span class="post-meta-item post-meta-views">
  <span class="pv-counter">loading</span> views
</span>


      </div>
      <div class="post-content">
        
          <p>这次升级 PHP7，一切顺利，到了恢复站点数据的时候，发现<a target="_blank" rel="noopener" href="https://prinzeugen.net/do-you-like-me/">上次搞的</a> “Do you like me?” 不工作了。看了日志发现是 <code>mysql_connect()</code> 这个函数的问题。</p>
<p>看了下文档，原来在 PHP7 中全面移除了 <code>mysql_</code> 系列函数，转而使用 <code>mysqli</code> 或者 PDO。。fuck 劳资皮肤站里都是 mysql_ 系列函数啊啊</p>
<p>上次偷懒用的 LWL12 写的，看来他也没想到这种情况呢。遂使用 mysqli 重写之。</p>
<p>mysqli 改为以面向对象的方式操作数据库，而不是 <code>mysql_</code> 系列函数的面向过程，这点倒是挺好的。</p>
<p>不知道为何原来 LWL12 写的版本单独使用了一个表来存投票数，可能是怕效率问题。不过 <code>SELECT COUNT(*)</code> 在没有指定 WHICH 的时候效率还是蛮高的，参见：<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/19641756">知乎：mysql select count(*) 与 select count(id) 两个执行效率怎样？</a></p>
<p>其实也没改多少，另外把建表的 SQL 也顺便封装在文件里了，托管在 <a target="_blank" rel="noopener" href="https://gist.github.com/prinsss/48920748b328bacead1b">Gist</a> 上。</p>
          <p><a class="more-link" href="/do-you-like-me-mysqli-version/#more">&gt; READ MORE...</a></p>
        
      </div>
    </article>
  
    <article class="post">
      <h2 class="post-title">
        <a href="/shoshin-wasuru-bekarazu/">不忘初心，方得始终</a>
      </h2>
      <div class="post-meta">
        <span class="post-meta-item post-meta-date">
  <time datetime="2016-01-11T00:15:50+08:00">2016-01-11</time>
</span>

<span class="post-meta-item post-meta-categories">
  <span class="post-meta-item-indicator">Category:</span>
  
    <a class="category-link" href="/categories/essay/">随笔</a>
  
</span>

<span class="post-meta-item post-meta-tags">
  
    <a class="tag--link" href="/tag/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" rel="tag">年度总结</a>
  
</span>


<span class="post-meta-item post-meta-views">
  <span class="pv-counter">loading</span> views
</span>


      </div>
      <div class="post-content">
        
          <p>如白驹过隙，2015 年已经悄悄离去，新年的钟声已经敲响。</p>
<p>虽然早就过了发年终总结的日子，但本着宁缺毋滥的原则，一直捂着草稿没发，我博客第一次的年度总结，总要搞得有逼格一点。</p>
<h2 id="回首-2015">回首 2015</h2>
<p>2015，毫不夸张的说是我收获最大的一年。去年的 3 月 28 日，不知道哪里来的兴趣，开始折腾起了独立博客。</p>
<p>我从来不是一个喜欢写文学性文字的人，以前不是，将来也应该不会是。开始搭建博客的理由已经不可考，但是我仍然庆幸当初选择了这条道路。</p>
<p>2015 年，我高中一年级。真的只是一个平凡的，刚上完一般的高一课程，终于开始习惯了高中生活的死小孩。</p>
<p>稍微和其他孩子不一样的，也就是我对计算机的兴趣了。嘛，讲的这么高大上，其实就是比起用电脑玩游戏，更喜欢折腾一些乱七八糟的东西。</p>
<p>我绝对不算早接触计算机的那一批人，我的父母也没有那么高瞻远瞩，不过在 2008 年，我还是碰到了人生中第一台电脑。</p>
<p>我至今记得她刚刚被父亲抬回家的样子。</p>
<p>清华同方 真爱 G2000 品牌机，棱角分明，散发出一股冷峻气息的黑色机箱，漂亮的镜面设计的前面板，这么一个酷爆了的铁疙瘩，给那个卧室客厅合一的蜗居和我以后的人生，涂上了浓密重彩的一笔。</p>
<p>她刚刚被请回家时，我凭借着不知道哪里学来的技能将其正确的与那台 14 吋液晶彩电连在一起并且成功点亮了，不过看到的是一个黑黑的屏幕，上面闪烁着光标与一个字符。我在键盘上乱按一通，它也会显示对应的字母。</p>
<p>这和我在别人家里玩的不一样啊，我哭着喊着要父亲拿回店里修。知道那是 DOS，已经是几年后的事情了。</p>
<p>同其他同龄的孩子一样，打 CF 到废寝忘食在我身上也发生过。然而不知道什么时候，甚至连我也没注意到，当我已经把管理 Windows 的文件系统，浏览 system32，折腾美化，优化系统作为一种乐趣的时候，我已经走上了一条不归路。</p>
<p>初中二年级，照理来说应该是在本子上写写画画人物设定，写写右臂封印着黑炎龙的世界第一勇者流落民间扮猪吃老虎一路装逼如风抱得美人归的小说的年纪，但窝不知道从哪里知道了编程这个词汇，并且发现了吴涛大哥的中文编程语言后，我又在这条不归路上前进了一步。</p>
<p>易语言，中文编程从入门到精通，海洋出版社出版。这就是当初我书架上最大部头的一本书了。感谢这本书，虽然现在的我再去看，可能会嗤之以鼻，但是这本书给予了我一个起点，给予了我对编程的兴趣，给予了我完成一个作品的满足感。</p>
<p>感谢这门语言，没有它，就不会有今天的我。愿它可以吸引更多的希望学习编程的中国人初学者踏上这条道路。</p>
          <p><a class="more-link" href="/shoshin-wasuru-bekarazu/#more">&gt; READ MORE...</a></p>
        
      </div>
    </article>
  
    <article class="post">
      <h2 class="post-title">
        <a href="/blessing-skin-server-0-1/">Blessing Skin Server 0.1 —— 开源 PHP Minecraft 皮肤站</a>
      </h2>
      <div class="post-meta">
        <span class="post-meta-item post-meta-date">
  <time datetime="2016-01-03T22:24:46+08:00">2016-01-03</time>
</span>

<span class="post-meta-item post-meta-categories">
  <span class="post-meta-item-indicator">Category:</span>
  
    <a class="category-link" href="/categories/tech/">技术</a>
  
</span>

<span class="post-meta-item post-meta-tags">
  
    <a class="tag--link" href="/tag/Minecraft/" rel="tag">Minecraft</a> <a class="tag--link" href="/tag/PHP/" rel="tag">PHP</a> <a class="tag--link" href="/tag/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a>
  
</span>


<span class="post-meta-item post-meta-views">
  <span class="pv-counter">loading</span> views
</span>


      </div>
      <div class="post-content">
        
          <p><img src="https://img.prin.studio/images/2016/01/2016-01-03_05-22-44.png" srcset="/images/loading.jpg" data-srcset="https://img.prin.studio/images/2016/01/2016-01-03_05-22-44.png" alt="bss upload" /></p>
<p>很久以前就有想写一个皮肤站的想法了，但是苦于没有时间且 PHP、前端的 coding 都不熟练，所以一直搁置着，当作一个目标。</p>
<p>恰逢前几周稍微有点时间（其实是克服了懒癌），就写了一个皮肤站的原型。PHP + MySQL，表单 POST 数据，基本的登录/注册/上传 功能还是实现了的。但是前端完全没有写，全是 webkit 的默认样式。</p>
<p>不过盼星星盼月亮终于等到了元旦假期（连上周末三天），于是把整个项目重构了一下，并且用鞋拔子写了个稍微能看的页面。</p>
<p>前端页面引用的资源/库均位于根目录下的 <code>/assets</code> 和 <code>/libs</code>，这是不知道从哪里学来的，总之觉得这样挺好的就这样放了（笑）</p>
<p>然后是实现了全站 Ajax，登录/注册 均 POST 请求 <code>check.php</code> 返回 json，加入了 SQL 注入防护（虽然还没有 sqlmap 测试过），加入了基于 IP 的注册数量限制，支持保存 cookie，token 验证自动登录。token 就是使用普通的用于验证的不可逆算法得到（用户名 + MD5 密码 + 盐，MD5 二次加密）。</p>
<p>Ajax 文件上传带 token POST 请求 <code>upload.php</code>，同样返回 json，上次后的文件位于 <code>/uploads</code>。（其实窝觉着这俩可以放一个文件里的）</p>
<p><code>user.php</code> 为用户页面，本来是想用 php 路由到 <code>/user</code> 和 <code>/admin</code> 等子目录的，但是想想还是算了。因为窝对路由之类的理解并不多，边查边写的话窝也没有那么多时间了。准备放在下一个版本里。</p>
<p><code>user.php</code> 中使用了 djazz 的 <a target="_blank" rel="noopener" href="http://djazz.se/apps/MinecraftSkin/">Minecraft Skin Previewer</a> 实现 3D 皮肤预览（就是 skinme 使用的那个），窝将其封装了一下放入了 three.msp.js 中，可以使用类似 <code>MSP.getStatus()</code>、<code>MSP.changeSkin()</code> 的接口来访问。</p>
<p>后端就没啥出彩的地方了（话说前端也没有吧），所有使用了数据库连接的操作均封装为函数放在 <code>connect.php</code> 里面。不过感觉这个放根目录不合适就是了。</p>
<p><code>config.php</code> 中定义了数据库连接信息，站点名称等常量以供调用。这是从 WordPress 那学来的（笑</p>
<p>遗憾的是由于没有时间，后台管理页面还没写，目前只能通过自己管理数据库和文件的方式来管理用户。而且现在的数据表结构也不支持后台管理 qwq</p>
<p>而且前端的 JS 和 CSS 都写得乱糟糟的，CSS 选择器一半是 id 一般是 class，文件关系也没处理好，没有响应式设计，有些地方还用了绝对定位 <img src="https://img.prin.studio/images/2015/10/2015-10-24_09-56-11.jpg" srcset="/images/loading.jpg" data-srcset="https://img.prin.studio/images/2015/10/2015-10-24_09-56-11.jpg" alt="emotion1" /> </p>
<p>不过由于时间所限，这些都放到下一个版本吧~</p>
<hr />
<p>项目开源在 <a target="_blank" rel="noopener" href="https://github.com/prinsss/blessing-skin-server">GitHub</a> 上，欢迎 Pull Request~ 在线演示：<a target="_blank" rel="noopener" href="https://skin.prinzeugen.net/">https://skin.prinzeugen.net/</a></p>

        
      </div>
    </article>
  
    <article class="post">
      <h2 class="post-title">
        <a href="/happy-newyear/">新年快乐～</a>
      </h2>
      <div class="post-meta">
        <span class="post-meta-item post-meta-date">
  <time datetime="2016-01-01T08:00:20+08:00">2016-01-01</time>
</span>

<span class="post-meta-item post-meta-categories">
  <span class="post-meta-item-indicator">Category:</span>
  
    <a class="category-link" href="/categories/diary/">日常</a>
  
</span>

<span class="post-meta-item post-meta-tags">
  
    无标签
  
</span>


<span class="post-meta-item post-meta-views">
  <span class="pv-counter">loading</span> views
</span>


      </div>
      <div class="post-content">
        
          <p><a target="_blank" rel="noopener" href="http://www.pixiv.net/member_illust.php?mode=medium&amp;illust_id=24052290"><img src="https://img.prin.studio/images/2016/01/2016-01-01_04-16-14.jpg" srcset="/images/loading.jpg" data-srcset="https://img.prin.studio/images/2016/01/2016-01-01_04-16-14.jpg" alt="id=24052290" /></a></p>

        
      </div>
    </article>
  
    <article class="post">
      <h2 class="post-title">
        <a href="/minecraft-1-9-features/">Minecraft 1.9 快照试玩感想</a>
      </h2>
      <div class="post-meta">
        <span class="post-meta-item post-meta-date">
  <time datetime="2016-01-01T06:40:16+08:00">2016-01-01</time>
</span>

<span class="post-meta-item post-meta-categories">
  <span class="post-meta-item-indicator">Category:</span>
  
    <a class="category-link" href="/categories/essay/">随笔</a>
  
</span>

<span class="post-meta-item post-meta-tags">
  
    <a class="tag--link" href="/tag/Minecraft/" rel="tag">Minecraft</a>
  
</span>


<span class="post-meta-item post-meta-views">
  <span class="pv-counter">loading</span> views
</span>


      </div>
      <div class="post-content">
        
          <p>早就听闻 1.9 战斗更新很坑爹，于是找了个时间体验了一把，版本是 15w50a。（多图注意）</p>
<p><img src="https://img.prin.studio/images/2015/12/2015-12-13_03-13-36.png" srcset="/images/loading.jpg" data-srcset="https://img.prin.studio/images/2015/12/2015-12-13_03-13-36.png" alt="1" /></p>
<p>首先是存档拥有了一个自己的图标，可以自定义存档文件夹下的 icon.png，默认为第一次进入世界的截图。 进入了世界，首先迫不及待的试了一下传说中的双持（默认按 F 交换主副手的物品）：</p>
<p><img src="https://img.prin.studio/images/2015/12/2015-12-13_03-18-46.png" srcset="/images/loading.jpg" data-srcset="https://img.prin.studio/images/2015/12/2015-12-13_03-18-46.png" alt="2" /></p>
<blockquote>
<p>哇塞，帅爆了耶，二刀流有木有！</p>
</blockquote>
<p>然而武器（除了弓）都只能在主手用 qwq，副手放放火把之类的还好。副手有东西时，鼠标右键就是使用副手的物品。</p>
<p><img src="https://img.prin.studio/images/2015/12/2015-12-31_09-58-26.png" srcset="/images/loading.jpg" data-srcset="https://img.prin.studio/images/2015/12/2015-12-31_09-58-26.png" alt="20151231175748" /></p>
<p>但是，有个坑爹的地方。场景模拟：</p>
<blockquote>
<p>你兴高采烈的双持稿子和火把下矿了，想着 “终于可以在原版体验采矿钻头插火把的快感辣~”，于是在地下碰到了姜丝围攻。你想着，哎呀，还是先垫垫高比较好打，于是对着地面一跳一右键。。然后插上了火把（摔</p>
<p>当然，你也可能会想吃东西，吃完发现满地火把。。（笑</p>
</blockquote>
<p>所以说还是要适应，感觉并不是特有用的更新。 然后就是试验传说中的 <strong>战斗更新</strong> 了： 然后。。。</p>
<p><img src="https://img.prin.studio/images/2015/12/2015-12-13_03-33-52.png" srcset="/images/loading.jpg" data-srcset="https://img.prin.studio/images/2015/12/2015-12-13_03-33-52.png" alt="4" /></p>
<p>OH, WHAT THE FUUUUUCK !!!</p>
          <p><a class="more-link" href="/minecraft-1-9-features/#more">&gt; READ MORE...</a></p>
        
      </div>
    </article>
  

  <nav class="pagination">
  <a class="extend prev" rel="prev" href="/page/12/">Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/14/">Next</a>
</nav>


      </section>
      <aside class="sidebar col-md-3 offset-md-1 col-12">
        
        
<section class="widget" id="widget-recent-posts">
  <h3 class="widget-title">最新文章</h3>
  <ul class="menu">
    
    
    
    
      <li class="menu-item">
        <a href="/synology-disk-compatibility-fix/">修复 Synology NAS 升级后 M.2 存储池兼容性问题</a>
      </li>
    
      <li class="menu-item">
        <a href="/zspace-qnap-nas-shared-nut-ups/">极空间与 QNAP NAS 实现共享 NUT UPS</a>
      </li>
    
      <li class="menu-item">
        <a href="/building-blog-friend-circle/">重构博客友链页面 & 友链朋友圈开源</a>
      </li>
    
      <li class="menu-item">
        <a href="/react-unstable-nested-components/">真的不可以在 React 组件内部嵌套定义子组件吗？</a>
      </li>
    
      <li class="menu-item">
        <a href="/graphics-with-tikz-in-hexo/">使用 TikZ 在 Hexo 博客中愉快地画图</a>
      </li>
    
  </ul>
</section>



<section class="widget" id="widget-categories">
  <h3 class="widget-title">分类</h3>
  
  
    <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/tech/">技术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/diary/">日常</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/">随笔</a></li></ul>
  
</section>



<section class="widget" id="widget-pages">
  <h3 class="widget-title">页面</h3>
  <ul class="menu">
    
      
      <li class="menu-item menu-item-archives">
        <a href="/archives/" title="">归档</a>
      </li>
    
      
      <li class="menu-item menu-item-about">
        <a href="/about/" title="">关于我</a>
      </li>
    
      
      <li class="menu-item menu-item-friends">
        <a href="/friends/" title="">朋友们</a>
      </li>
    
  </ul>
</section>



<section class="widget" id="widget-links">
  <h3 class="widget-title">链接</h3>
  <ul class="menu">
    
      
      <li class="menu-item menu-item-github">
        <a href="https://github.com/prinsss" title="" target="_blank">GitHub</a>
      </li>
    
      
      <li class="menu-item menu-item-rss">
        <a href="/atom.xml" title="" target="_blank">RSS Feed</a>
      </li>
    
  </ul>
</section>



<section class="widget" id="widget-tagcloud">
  <h3 class="widget-title">标签云</h3>
  <a href="/tag/ACGN/" style="font-size: 17.86px;">ACGN</a> <a href="/tag/Android/" style="font-size: 15px;">Android</a> <a href="/tag/Apple/" style="font-size: 10.71px;">Apple</a> <a href="/tag/C/" style="font-size: 10.71px;">C++</a> <a href="/tag/CSS/" style="font-size: 11.43px;">CSS</a> <a href="/tag/Docker/" style="font-size: 11.43px;">Docker</a> <a href="/tag/GFW/" style="font-size: 15.71px;">GFW</a> <a href="/tag/Ghost/" style="font-size: 12.86px;">Ghost</a> <a href="/tag/Git/" style="font-size: 10.71px;">Git</a> <a href="/tag/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tag/JavaScript/" style="font-size: 16.43px;">JavaScript</a> <a href="/tag/LaTeX/" style="font-size: 10px;">LaTeX</a> <a href="/tag/Laravel/" style="font-size: 17.86px;">Laravel</a> <a href="/tag/Linux/" style="font-size: 17.14px;">Linux</a> <a href="/tag/Mac/" style="font-size: 10.71px;">Mac</a> <a href="/tag/Minecraft/" style="font-size: 13.57px;">Minecraft</a> <a href="/tag/NAS/" style="font-size: 10.71px;">NAS</a> <a href="/tag/Nginx/" style="font-size: 12.86px;">Nginx</a> <a href="/tag/OpenWrt/" style="font-size: 10.71px;">OpenWrt</a> <a href="/tag/PHP/" style="font-size: 18.57px;">PHP</a> <a href="/tag/Python/" style="font-size: 12.14px;">Python</a> <a href="/tag/RSS/" style="font-size: 11.43px;">RSS</a> <a href="/tag/React/" style="font-size: 10.71px;">React</a> <a href="/tag/SSL/" style="font-size: 15px;">SSL</a> <a href="/tag/Sublime/" style="font-size: 11.43px;">Sublime</a> <a href="/tag/UserScript/" style="font-size: 10.71px;">UserScript</a> <a href="/tag/VPS/" style="font-size: 17.14px;">VPS</a> <a href="/tag/VSCode/" style="font-size: 10.71px;">VSCode</a> <a href="/tag/VTuber/" style="font-size: 10px;">VTuber</a> <a href="/tag/WebGL/" style="font-size: 10px;">WebGL</a> <a href="/tag/Windows/" style="font-size: 14.29px;">Windows</a> <a href="/tag/WordPress/" style="font-size: 17.14px;">WordPress</a> <a href="/tag/%E5%88%86%E4%BA%AB/" style="font-size: 17.86px;">分享</a> <a href="/tag/%E5%89%8D%E7%AB%AF/" style="font-size: 17.86px;">前端</a> <a href="/tag/%E5%8C%BA%E5%9D%97%E9%93%BE/" style="font-size: 10px;">区块链</a> <a href="/tag/%E5%8D%9A%E5%AE%A2/" style="font-size: 20px;">博客</a> <a href="/tag/%E5%91%BD%E4%BB%A4%E8%A1%8C/" style="font-size: 15.71px;">命令行</a> <a href="/tag/%E5%AD%97%E4%BD%93/" style="font-size: 12.14px;">字体</a> <a href="/tag/%E5%AE%89%E5%88%A9/" style="font-size: 10.71px;">安利</a> <a href="/tag/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" style="font-size: 11.43px;">年度总结</a> <a href="/tag/%E6%95%99%E7%A8%8B/" style="font-size: 10.71px;">教程</a> <a href="/tag/%E6%B0%B4/" style="font-size: 10.71px;">水</a> <a href="/tag/%E7%89%A9%E8%81%94%E7%BD%91/" style="font-size: 10px;">物联网</a> <a href="/tag/%E7%AC%94%E8%AE%B0/" style="font-size: 10.71px;">笔记</a> <a href="/tag/%E7%BD%91%E7%BB%9C/" style="font-size: 12.86px;">网络</a> <a href="/tag/%E8%80%B3%E6%9C%BA/" style="font-size: 12.86px;">耳机</a> <a href="/tag/%E8%AF%84%E6%B5%8B/" style="font-size: 11.43px;">评测</a> <a href="/tag/%E8%B8%A9%E5%9D%91/" style="font-size: 19.29px;">踩坑</a> <a href="/tag/%E8%BF%90%E7%BB%B4/" style="font-size: 13.57px;">运维</a> <a href="/tag/%E9%9F%B3%E8%A7%86%E9%A2%91/" style="font-size: 14.29px;">音视频</a>
</section>


      </aside>
    </div>
  </div>
</main>

<footer>
  
  <div class="container">
    <p>
      &copy; 2026 <a href="https://prinsss.github.io">PRIN BLOG</a>. Proudly published with
      <a href="https://hexo.io/" target="_blank">Hexo</a> & <a href="https://github.com/printempw/hexo-theme-murasaki/" target="_blank">Murasaki</a>.
    </p>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/han-css@3.3.0/dist/han.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@10.6.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.3.1/dist/lazyload.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
  Han(document.querySelector('section.content')).setRoutine([
    'initCond', 'renderElem', 'renderJiya', 'correctBasicBD', 'substCombLigaWithPUA'
    // 'renderHanging', 'renderHWS'
  ]).render();
  new LazyLoad({
    elements_selector: '.post-content img',
    callback_loaded: function (el) {
      el.parentNode.nodeName.toLowerCase() === 'a' || mediumZoom(el, { margin: 24 });
    }
  });
</script>
  <script async src="https://oishii.prin.studio/delicious-party"
    data-website-id="02075562-9733-4917-8c28-be13173bb1f7">
  </script>

</body>
</html>
